<h2>Create a DMP via JSON</h2>

<p>Registers a DMP with the hub.</p>

<p>Make sure you have logged in above!</p>

<%= form_with url: dmp_create_test_path, remote: true, method: :post do %>
  <div>
    <%= label_tag :token, 'Authorization Token:' %>
    <%= text_field_tag :token, nil, class: 'auth_token' %>
  </div>
  <div>
    <%= label_tag :json, 'JSON:' %>
    <%= text_area_tag :json %>
  </div>
  <%= submit_tag 'Register DMP' %>
<% end %>
<div id="auth_create_errors" style="color: red;"></div>
<pre id="auth_create_results" style="background-color: #f2f2f2; padding:10px 5px"></pre>

<script>
  function displayCreateTestResults(data) {
    if (data.errors) {
      document.getElementById('auth_create_errors').innerHTML = data.errors;
      document.getElementById('auth_create_results').innerHTML = '';
    } else {
      document.getElementById('auth_create_errors').innerHTML = '';
      document.getElementById('auth_create_results').innerHTML = JSON.stringify(data, undefined, 2);
    }
  }
</script>